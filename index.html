<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Downloader</title>

    <style>
        /* --- same styles as before â€“ only the colour vars are kept --- */
        * { margin:0; padding:0; box-sizing:border-box; user-select:none;
            font-family:'Lucida Sans','Lucida Sans Regular','Lucida Grande',
                         'Lucida Sans Unicode',Geneva,Verdana,sans-serif; }
        body { display:grid; place-items:center; min-height:100vh; background:#fff; }

        .main-container { width:90%; max-width:600px; padding:1rem;
                          border-radius:10px; background:rgba(0,0,0,.5);
                          backdrop-filter:blur(5px); margin-bottom:2rem;
                          text-align:center; }
        .main-heading { color:#fff; font-size:1.5rem; margin-bottom:1rem; }

        #user-url { width:70%; background:linear-gradient(135deg,#0e7a5d,#437584);
                    color:#fff; font-weight:bold; border-radius:10px; border:none;
                    padding:.5rem 1rem; margin-bottom:1rem; }
        #user-url::placeholder { text-align:center; color:#fff; opacity:.4;
                                 font-weight:500; }

        #download-button { background:#24c724; width:100px; color:#fff;
                           border-radius:10px; padding:.5rem; outline:none;
                           border:none; transition:all .5s ease; }
        #download-button:hover { transform:scale(1.1); cursor:pointer;
                                 background:blue; }

        /* Projects grid â€“ unchanged */
        .projects-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr));
                         gap:30px; }
        .project-card { background:rgba(10,10,10,.7); border-radius:5px;
                        overflow:hidden; border:1px solid var(--gray);
                        transition:transform .3s,border-color .3s; }
        .project-card:hover { transform:translateY(-10px); border-color:var(--primary); }
        .project-img { height:200px; background:var(--darker);
                       display:flex; align-items:center; justify-content:center;
                       color:var(--primary); font-size:3rem; }
        .project-content { padding:20px; }
        .project-content h3 { font-size:1.3rem; margin-bottom:10px; color:var(--primary); }
        .project-content p { margin-bottom:15px; font-size:.9rem; color:#ccc; }
        .project-img img { width:100%; height:100%; object-fit:cover; }
        .project-links { display:flex; gap:10px; }
        .project-links a { padding:8px 15px; background:transparent;
                           color:var(--primary); border:1px solid var(--primary);
                           text-decoration:none; font-size:.8rem;
                           transition:all .3s; }
        .project-links a:hover { background:var(--primary); color:var(--dark); }

        :root { --primary:#0e7a5d; --gray:#555; --darker:#111; --dark:#000; }
    </style>
</head>

<body>

    <!-- YouTube â†’ MP3 downloader -->
    <div class="main-container">
        <p class="main-heading">YouTube Audio Downloader</p>
        <input type="text" id="user-url" placeholder="Enter YouTube URL">
        <input type="button" id="download-button" value="Download">
    </div>

    <!-- Project card with dynamic thumbnail -->
    <section id="projects">
        <div class="projects-grid">
            <div class="project-card">
                <div class="project-img">
                    <img id="thumbnail" src="" alt="Video thumbnail">
                </div>
                <div class="project-content">
                    <h3>All is Njabulo JbðŸ¤–</h3>
                    <p>1.. Click to download audio</p>
                    <p>2.. Open repository for online video</p>
                    <div class="project-links">
                        <a id="audio-link" href="#" download="audio.mp3">
                            <i class="fas fa-download"></i> Download Audio
                        </a>
                        <a id="video-link" href="#" download="video.mp4">
                            <i class="fas fa-download"></i> Download Video
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // --- YouTube downloader (unchanged) ---
        const downloadButton = document.getElementById('download-button');
        const userUrl = document.getElementById('user-url');
        const thumbImg = document.getElementById('thumbnail');
        const audioLink = document.getElementById('audio-link');

        const extractVideoId = (url) => {
            const parsedUrl = new URL(url);
            if (parsedUrl.searchParams.has('v')) return parsedUrl.searchParams.get('v');
            const segs = parsedUrl.pathname.split('/');
            return segs.find(s => s.length === 11);
        };

        const downloadAudio = (result) => {
            const link = document.createElement('a');
            link.href = result.link;
            link.download = `${result.title}.mp3`;
            link.style.display = 'none';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        };

        const getData = async () => {
            const videoId = extractVideoId(userUrl.value);
            if (!videoId) {
                alert('Could not extract video ID. Check the URL.');
                return;
            }

            // Show the YouTube thumbnail automatically
            thumbImg.src = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`;
            thumbImg.alt = `Thumbnail for video ${videoId}`;

            // Call the MP3 API
            const apiUrl = `https://youtube-mp36.p.rapidapi.com/dl?id=${videoId}`;
            const opts = {
                method: 'GET',
                headers: {
                    'x-rapidapi-key': 'YOUR_RAPIDAPI_KEY',   // â† replace with your key
                    'x-rapidapi-host': 'youtube-mp36.p.rapidapi.com'
                }
            };

            try {
                const r = await fetch(apiUrl, opts);
                const data = await r.json();
                downloadAudio(data);
            } catch (e) {
                console.error('Fetch error:', e);
                alert('Something went wrong. See console for details.');
            }
        };

        downloadButton.addEventListener('click', getData);

        // Optional: update thumbnail while the user types (no API call)
        userUrl.addEventListener('input', () => {
            const vid = extractVideoId(userUrl.value);
            if (vid) {
                thumbImg.src = `https://img.youtube.com/vi/${vid}/default.jpg`;
                thumbImg.alt = `Thumbnail for video ${vid}`;
            } else {
                thumbImg.src = '';
                thumbImg.alt = 'Video thumbnail';
            }
        });
    </script>

</body>
  </html>

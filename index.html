<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Downloader</title>

    <style>
        * { margin:0; padding:0; box-sizing:border-box; user-select:none;
            font-family:'Lucida Sans','Lucida Sans Regular','Lucida Grande',
                         'Lucida Sans Unicode',Geneva,Verdana,sans-serif; }
        body { display:grid; place-items:center; min-height:100vh; background:#fff; }

        .main-container { width:90%; max-width:600px; padding:1rem;
                          border-radius:10px; background:rgba(0,0,0,.5);
                          backdrop-filter:blur(5px); margin-bottom:2rem;
                          text-align:center; }
        .main-heading { color:#fff; font-size:1.5rem; margin-bottom:1rem; }

        #user-url { width:70%; background:linear-gradient(135deg,#0e7a5d,#437584);
                    color:#fff; font-weight:bold; border-radius:10px; border:none;
                    padding:.5rem 1rem; margin-bottom:1rem; }
        #user-url::placeholder { text-align:center; color:#fff; opacity:.4;
                                 font-weight:500; }

        #download-button { background:#24c724; width:100px; color:#fff;
                           border-radius:10px; padding:.5rem; outline:none;
                           border:none; transition:all .5s ease; }
        #download-button:hover { transform:scale(1.1); cursor:pointer;
                                 background:blue; }

        /* Projects grid */
        .projects-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr));
                         gap:30px; }
        .project-card { background:rgba(10,10,10,.7); border-radius:5px;
                        overflow:hidden; border:1px solid var(--gray);
                        transition:transform .3s,border-color .3s; }
        .project-card:hover { transform:translateY(-10px); border-color:var(--primary); }
        .project-img { height:200px; background:var(--darker);
                       display:flex; align-items:center; justify-content:center;
                       color:var(--primary); font-size:3rem; }
        .project-content { padding:20px; }
        .project-content h3 { font-size:1.3rem; margin-bottom:10px; color:var(--primary); }
        .project-content p { margin-bottom:15px; font-size:.9rem; color:#ccc; }
        .project-img img { width:100%; height:100%; object-fit:cover; }
        .project-links { display:flex; gap:10px; }
        .project-links a { padding:8px 15px; background:transparent;
                           color:var(--primary); border:1px solid var(--primary);
                           text-decoration:none; font-size:.8rem;
                           transition:all .3s; }
        .project-links a:hover { background:var(--primary); color:var(--dark); }

        :root { --primary:#0e7a5d; --gray:#555; --darker:#111; --dark:#000; }
    </style>
</head>

<body>

    <!-- YouTube â†’ MP3 downloader -->
    <div class="main-container">
        <p class="main-heading">YouTube Audio Downloader</p>
        <input type="text" id="user-url" placeholder="Enter YouTube URL">
        <input type="button" id="download-button" value="Download">
    </div>

    <!-- Project card with dynamic thumbnail -->
    <section id="projects">
        <div class="projects-grid">
            <div class="project-card">
                <div class="project-img">
                    <img id="thumbnail" src="" alt="Video thumbnail">
                </div>
                <div class="project-content">
                    <h3 id="video-title">All is Njabulo JbðŸ¤–</h3>
                    <p>1.. Click to download audio</p>
                    <p>2.. Open repository for online video</p>
                    <div class="project-links">
                        <a id="audio-link" href="#" download="audio.mp3">
                            <i class="fas fa-download"></i> Download Audio
                        </a>
                        <a id="video-link" href="#" download="video.mp4">
                            <i class="fas fa-download"></i> Download Video
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        const extractVideoId = (url) => {
            const parsed = new URL(url);
            if (parsed.searchParams.has('v')) return parsed.searchParams.get('v');
            const parts = parsed.pathname.split('/');
            return parts.find(p => p.length === 11);
        };

        const urlInput   = document.getElementById('user-url');
        const thumbImg    = document.getElementById('thumbnail');
        const titleEl     = document.getElementById('video-title');
        const audioLink   = document.getElementById('audio-link');
        const videoLink   = document.getElementById('video-link');

        urlInput.addEventListener('input', () => {
            const vid = extractVideoId(urlInput.value);
            if (vid) {
                thumbImg.src = `https://img.youtube.com/vi/${vid}/default.jpg`;
                titleEl.textContent = `Loadingâ€¦`;
                fetch(`https://www.youtube.com/oembed?url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D${vid}&format=json`)
                    .then(r => r.json())
                    .then(data => { titleEl.textContent = data.title; })
                    .catch(() => { titleEl.textContent = 'Unknown title'; });
            } else {
                thumbImg.src = '';
                titleEl.textContent = 'All is Njabulo JbðŸ¤–';
            }
        });

        const downloadAudio = (result) => {
            const safeName = result.title.replace(/[^\w\s-]/gi, '').trim();
            const link = document.createElement('a');
            link.href = result.link;
            link.download = `${safeName}.mp3`;
            link.style.display = 'none';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        };

        const getAudio = async () => {
            const vid = extractVideoId(urlInput.value);
            if (!vid) {
                alert('Could not extract video ID. Check the URL.');
                return;
            }

            thumbImg.src = `https://img.youtube.com/vi/${vid}/maxresdefault.jpg`;

            const apiUrl = `https://youtube-mp36.p.rapidapi.com/dl?id=${vid}`;
            const opts = {
                method: 'GET',
                headers: {
                    'x-rapidapi-key': 'YOUR_RAPIDAPI_KEY',   // â† replace with your key
                    'x-rapidapi-host': 'youtube-mp36.p.rapidapi.com'
                }
            };

            try {
                const r = await fetch(apiUrl, opts);
                const data = await r.json();
                downloadAudio(data);
            } catch (e) {
                console.error('Fetch error:', e);
                alert('Something went wrong. See console for details.');
            }
        };

        const videoPlaceholderUrl = 'data:video/mp4;base64,AAU...'; // tiny 1â€‘sec MP4 (base64)

        videoLink.addEventListener('click', (e) => {
            e.preventDefault(); // stop the default link behaviour
            const vid = extractVideoId(urlInput.value);
            if (!vid) {
                alert('Please enter a valid YouTube URL first.');
                return;
            }
            const safeName = titleEl.textContent.replace(/[^\w\s-]/gi, '').trim();
            const link = document.createElement('a');
            link.href = videoPlaceholderUrl;               // replace with real MP4 URL
            link.download = `${safeName}.mp4`;
            link.style.display = 'none';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        });

        document.getElementById('download-button').addEventListener('click', getAudio);
    </script>

</body>
  </html>
